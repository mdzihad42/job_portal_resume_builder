{% extends 'base.html' %}

{% block title %}Job List{% endblock %}

{% block content %}
<div class="container-fluid px-lg-5 px-3 py-4">
    <!-- Header & Search -->
    <div class="mb-5 animate-fade-in-up">
        <h1 class="display-4 fw-bold text-center mb-2" style="color: var(--primary-gold);">Available Opportunities</h1>
        <p class="text-center text-muted mb-5 lead">Find the perfect role for your career</p>

        <div class="search-container position-relative mx-auto" style="max-width: 800px; z-index: 10;">
            <div class="search-wrapper p-1 rounded-pill"
                style="background: rgba(30,30,30,0.8); border: 2px solid var(--primary-gold); box-shadow: 0 10px 30px rgba(0,0,0,0.3); backdrop-filter: blur(10px);">
                <form method="GET" class="d-flex w-100">
                    <div class="input-group">
                        <span class="input-group-text bg-transparent border-0 ps-4">
                            <i class="fas fa-search text-warning fa-lg search-pulse"></i>
                        </span>
                        <input type="text" name="q"
                            class="form-control border-0 bg-transparent text-white shadow-none py-3"
                            placeholder="Search by title, company, or keywords..." value="{{ query }}"
                            style="font-size: 1.1rem; font-weight: 500;">
                        <button type="submit" class="btn btn-premium rounded-pill px-5 m-1 fw-bold"
                            style="background: var(--gradient-accent); color: #1a1a1a; transition: all 0.3s ease;">
                            Search
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Jobs Grid -->
    <div class="row g-4">
        {% for job in jobs %}
        <div class="col-12 col-md-6 col-xl-4 animate-slide-in-up"
            onclick="location.href='{% url 'job_resume:job_detail' job.id %}'" style="cursor: pointer;">
            <div class="card h-100 border-0 job-card"
                style="background: linear-gradient(145deg, #1e1e1e 0%, #252525 100%); border: 1px solid rgba(255,255,255,0.05); border-radius: 20px; transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); position: relative; overflow: hidden;">

                <!-- Hover Glow Effect -->
                <div class="glow-effect"></div>

                <div class="card-body p-4 position-relative z-1">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <div class="icon-box rounded-3 d-flex align-items-center justify-content-center"
                            style="width: 50px; height: 50px; background: rgba(212, 175, 55, 0.1); color: var(--primary-gold);">
                            <i class="fas fa-briefcase fa-lg"></i>
                        </div>
                        <span class="badge rounded-pill px-3 py-2"
                            style="background: rgba(255,255,255,0.05); color: #aaa; border: 1px solid rgba(255,255,255,0.1);">
                            Full Time
                        </span>
                    </div>

                    <h4 class="card-title fw-bold text-white mb-2">{{ job.title }}</h4>
                    <p class="text-warning mb-3 fw-bold small text-uppercase ls-1">{{ job.company }}</p>

                    <div class="d-flex align-items-center text-white-50 mb-4 small">
                        <span class="me-3"><i class="fas fa-map-marker-alt me-1"></i>{{ job.location }}</span>
                        <span><i class="fas fa-money-bill-wave me-1"></i>{% if job.salary %}${{ job.salary }}{% else %}Negotiable{% endif %}</span>
                    </div>

                    <p class="card-text text-muted mb-4"
                        style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                        {{ job.description }}
                    </p>

                    <div
                        class="pt-3 border-top border-secondary opacity-75 d-flex justify-content-between align-items-center">
                        <small class="text-muted">Posted {{ job.created_at|timesince }} ago</small>
                        <span class="text-warning fw-bold small">View Details <i
                                class="fas fa-arrow-right ms-1"></i></span>
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12 text-center py-5">
            <div class="p-5 rounded-3 animate-fade-in"
                style="background: rgba(255,255,255,0.02); border: 2px dashed rgba(255,255,255,0.1);">
                <i class="fas fa-search fa-4x text-muted mb-4 opacity-50"></i>
                <h3 class="text-white mb-3">No Opportunities Found</h3>
                <p class="text-muted lead">Try adjusting your search terms or check back later.</p>
                {% if query %}
                <a href="{% url 'job_resume:job_list' %}" class="btn btn-outline-light rounded-pill px-4 mt-3">
                    Clear Search
                </a>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<style>
    /* Custom Animations & Styles */
    .search-pulse {
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0% {
            transform: scale(1);
            opacity: 1;
        }

        50% {
            transform: scale(1.1);
            opacity: 0.7;
        }

        100% {
            transform: scale(1);
            opacity: 1;
        }
    }

    .ls-1 {
        letter-spacing: 1px;
    }

    .job-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
        border-color: var(--primary-gold) !important;
    }

    .glow-effect {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at 50% 0%, rgba(212, 175, 55, 0.15), transparent 70%);
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .job-card:hover .glow-effect {
        opacity: 1;
    }

    .form-control::placeholder {
        color: rgba(255, 255, 255, 0.3);
    }
</style>
{% endblock %}